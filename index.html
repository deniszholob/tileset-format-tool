<!doctype html>
<html lang="en">
  <head>
    <!-- Meta Data -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="Denis Zholob" />
    <meta name="keywords" content="Denis, Zholob" />
    <meta name="title" content="Tileset Format Tool" />
    <meta
      name="description"
      content="Tile set tool to convert wetween different tile set formats, and modify borders."
    />

    <!-- Google / Search Engine Tags -->
    <meta itemprop="name" content="Tileset Format Tool" />
    <meta
      itemprop="description"
      content="Tile set tool to convert wetween different tile set formats, and modify borders."
    />
    <meta itemprop="image" content="assets/icons/splash.png" />

    <!-- Facebook Meta Tags -->
    <meta property="og:url" content="https://github.com/deniszholob/tileset-format-tool" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Tileset Format Tool" />
    <meta
      property="og:description"
      content="Tile set tool to convert wetween different tile set formats, and modify borders."
    />
    <meta property="og:image" content="assets/icons/splash.png" />
    <meta property="og:author" content="Denis Zholob" />

    <!-- Twitter Meta Tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Tileset Format Tool" />
    <meta
      name="twitter:description"
      content="Tile set tool to convert wetween different tile set formats, and modify borders."
    />
    <meta name="twitter:image" content="assets/icons/splash.png" />
    <meta name="twitter:site" content="@deniszholob" />
    <meta name="twitter:creator" content="@deniszholob" />

    <!-- Title/Icon -->
    <title>Tileset Format Tool</title>
    <link rel="icon" type="image/x-icon" href="favicon.ico" />
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png" />
    <link rel="apple-touch-startup-image" href="assets/icons/splash.jpg" />
    <link rel="mask-icon" href="safari-pinned-tab.svg" color="#ffffff" />
    <meta name="msapplication-TileColor" content="#ffffff" />
    <!-- <base href="/" /> -->

    <!-- PWA -->
    <link rel="manifest" href="manifest.webmanifest" />
    <meta name="theme-color" content="#ffffff" />

    <!-- Meta Tags Generated via http://heymeta.com -->
    <!-- Icons generated with https://realfavicongenerator.net/ -->

    <!-- Prefetch/Preconnect -->
    <!-- <link rel="dns-prefetch" href="https://fonts.googleapis.com"> -->
    <!-- <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin="anonymous"> -->
    <!-- <link rel="dns-prefetch" href="https://fonts.gstatic.com/s/"> -->
    <!-- <link rel="preconnect" href="https://fonts.gstatic.com/s/" crossorigin="anonymous"> -->
    <link rel="dns-prefetch" href="https://use.fontawesome.com" />
    <link rel="preconnect" href="https://use.fontawesome.com" crossorigin="anonymous" />

    <!-- Bootstrap -->
    <!-- <link rel="stylesheet" href="//stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
      crossorigin="anonymous"> -->

    <!-- Fonts -->
    <!-- https://fonts.google.com/specimen/VT323?preview.text=0123456789&query=VT323+ -->
    <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet" />
    <script
      defer
      src="https://use.fontawesome.com/releases/v6.4.0/js/all.js"
      integrity="sha384-Y7LSKwoY+C2iyfu/oupNnkGEN3EgA6skmJeVg5AyQk7ttcjX0XsLREmmuJW/SdbU"
      crossorigin="anonymous"
    ></script>

    <!-- Global Site Tag (gtag.js) - Google Analytics -->
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-28080172-12"></script>
    <script async="">
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());
      gtag("config", "UA-28080172-12");
    </script>

    <!-- Stylesheets -->
    <link rel="stylesheet" href="./styles/styles.css" />
    <!-- TODO: Remove sandbox Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>
  </head>

  <body
    class="bg-stone-200 min-h-screen min-w-screen flex justify-center flex-col"
    onload="onLoad()"
  >
    <!-- Without this image doesn't load programmatically for some reason -->
    <img id="bitMask" src="assets/bit-mask-tiles-beige-brown_64.png" class="hidden" />
    <!-- <img id="bitMask" src="assets/bit-mask-tiles-beige-brown.png" class="hidden" /> -->
    <!-- <img id="bitMask" src="assets/bit-mask-tiles-green-brown.png" class="hidden" /> -->
    <!-- <img id="bitMask" src="assets/bit-mask-tiles-blue-green.png" class="hidden" /> -->
    <!-- <img id="bitMask" src="assets/bit-mask-tiles-bw.png" class="hidden" /> -->

    <div class="w-full p-4 m-auto" style="max-width: 1920px">
      <div id="header" class="flex flex-row justify-evenly items-center">
        <div class="inline-flex gap-4 items-center">
          <h1 class="text-3xl">Tile Set Tool</h1>
          <a
            href="https://gamedev.stackexchange.com/questions/148460/combinations-for-tiling-two-textures-together/148464#148464"
            target="_blank"
            rel="noopener noreferrer"
            class="text-blue-600 hover:text-blue-500 underline"
          >
            Tile Sets Overview
          </a>
        </div>

        <div class="flex gap-2">
          <a
            target="_blank"
            rel="noopener noreferrer"
            class="text-blue-600 hover:text-blue-500 underline"
            href="https://discord.gg/PkyzXzz"
          >
            Discord
          </a>
          <a
            target="_blank"
            rel="noopener noreferrer"
            class="text-blue-600 hover:text-blue-500 underline"
            href="https://github.com/deniszholob/tileset-format-tool"
          >
            Github
          </a>
          <span>Updated: <span id="updateDate"></span></span>
        </div>
      </div>

      <div class="flex flex-col gap-4 container-max m-auto">
        <div id="nav">
          Navigation:
          <a href="./editor.html" class="text-blue-600 hover:text-blue-500 underline">Editor</a>
        </div>
        <div class="flex gap-4">
          <span class="text-center text-muted">
            If you find the tool or source code useful, you can
          </span>
          <div class="flex gap-4">
            <a
              href="https://ko-fi.com/deniszholob"
              target="_blank"
              rel="noopener"
              class="text-blue-600 hover:text-blue-500 underline"
            >
              Buy me Ko-fi
            </a>

            <a
              href="https://patreon.com/deniszholob"
              target="_blank"
              rel="noopener"
              class="text-blue-600 hover:text-blue-500 underline"
            >
              Support on Patreon
            </a>
          </div>
        </div>
      </div>

      <hr class="my-4 border-blue-500" />

      <div class="flex flex-wrap flex-row gap-4">
        <div id="Image" class="flex flex-col gap-4 container-max m-auto">
          <div
            id="ImageUpload"
            class="flex flex-row items-center justify-between p-4 border border-gray-300 rounded-md bg-blue-500 text-white flex-1 container-max m-auto flex-wrap"
          >
            <div class="flex flex-col justify-center flex-1">
              <label for="imageInput" class="mb-2 text-xl">Upload Tile Set</label>

              <input
                type="file"
                id="imageInput"
                accept="image/*"
                class=""
                onchange="onImageUpload()"
              />
            </div>

            <div class="flex-1 flex flex-col">
              <img
                id="uploadImagePreview"
                alt="Uploaded Image"
                class="h-40 w-auto object-contain m-auto image-pixelated"
              />
              <p class="text-center"><span class="font-bold" id="uploadImageDimensions"></span></p>
            </div>
          </div>

          <div
            class="flex flex-row gap-4 flex-wrap border border-gray-300 rounded-md p-4 bg-stone-100"
          >
            <div class="flex items-center flex-1">
              <label for="tileSizeInput" class="mr-2">Square Tile Size (px):</label>
              <input
                type="number"
                id="tileSizeInput"
                class="p-2 border border-gray-300 rounded-md max-w-20"
                min="1"
                value="32"
                oninput="onTileSizeChange()"
                disabled
              />
            </div>

            <div class="flex items-center flex-1">
              <label for="rowsInput" class="mr-2">Rows:</label>
              <input
                type="number"
                id="rowsInput"
                class="p-2 border border-gray-300 rounded-md max-w-20"
                min="1"
                value="1"
                oninput="onNumRowsChange()"
                disabled
              />
            </div>

            <div class="flex items-center flex-1">
              <label for="columnsInput" class="mr-2">Columns: </label>
              <input
                type="number"
                id="columnsInput"
                class="p-2 border border-gray-300 rounded-md max-w-20"
                min="1"
                value="1"
                oninput="onNumColsChange()"
                disabled
              />
            </div>
          </div>
        </div>

        <!-- <hr class="my-4 border-blue-500" /> -->

        <div id="Settings" class="flex flex-col gap-4 container-max m-auto">
          <!-- <h2 class="text-xl text-center">Settings</h2> -->

          <div
            class="flex flex-row gap-4 flex-wrap border border-gray-300 rounded-md p-4 bg-stone-100"
          >
            <div class="flex-1">
              <label for="sourceImageBorderSizeInput" class="mr-2">
                Source Image Border (px):
              </label>
              <input
                type="number"
                id="sourceImageBorderSizeInput"
                class="p-2 border border-gray-300 rounded-md max-w-20"
                value="0"
                oninput="onUpdateSourceImageBorderSize()"
              />
            </div>

            <div class="flex-1">
              <label for="sourceBorderSizeInput" class="mr-2">Source Tile Border (px):</label>
              <input
                type="number"
                id="sourceBorderSizeInput"
                class="p-2 border border-gray-300 rounded-md max-w-20"
                value="0"
                oninput="onUpdateSourceBorderSize()"
              />
            </div>

            <div class="flex-1">
              <label for="outputBorderSizeInput" class="mr-2">Output Tile Border (px):</label>
              <input
                type="number"
                id="outputBorderSizeInput"
                class="p-2 border border-gray-300 rounded-md max-w-20"
                value="1"
                oninput="onUpdateOutputBorderSize()"
              />
            </div>
          </div>

          <div
            class="flex flex-row gap-4 flex-wrap border border-gray-300 rounded-md p-4 bg-stone-100"
          >
            <button onclick="onProcessImage()" class="bg-blue-500 text-white px-4 py-2 rounded-md">
              Re Process Image
            </button>

            <div class="flex-1">
              <label for="bgColorInput" class="mr-2">BG Color:</label>
              <input type="color" id="bgColorInput" value="#ff0000" oninput="onUpdateBgColor()" />
            </div>

            <div class="flex-1">
              <label for="bgAlphaInput" class="mr-2">BG Alpha:</label>
              <input
                type="number"
                id="bgAlphaInput"
                value="100"
                oninput="onUpdateBgAlpha()"
                min="0"
                max="100"
                step="1"
                class="p-2 border border-gray-300 rounded-md max-w-20"
              />
            </div>

            <div class="flex-1">
              <label for="renderTileIds" class="mr-2">Render Tile Ids:</label>
              <input
                type="checkbox"
                id="renderTileIds"
                onclick="onToggleRenderTileIds()"
                checked="true"
              />
            </div>
          </div>
        </div>
      </div>

      <hr class="my-4 border-blue-500" />

      <div id="Preview" class="flex flex-row justify-evenly gap-4 mb-4 flex-wrap">
        <div class="flex flex-col gap-4 border border-gray-300 rounded-md p-4 flex-1 bg-stone-100">
          <div>
            <h2 class="text-xl text-center pb-4">Tiled Input</h2>
            <label for="inputTileSetSelect" class="mr-2">Input Tile Set:</label>
            <select
              id="inputTileSetSelect"
              class="p-2 border border-gray-300 rounded-md"
              onchange="onUpdateInputTileSet()"
            >
              <option value="0" selected>Option 0</option>
            </select>
            <a
              id="inputTileSetLink"
              href=""
              target="_blank"
              rel="noopener noreferrer"
              class="text-blue-600 hover:text-blue-500 underline"
            ></a>
          </div>

          <a
            id="inputImageBitMaskLink"
            download="input_image_bit_mask.png"
            class="block p-4 rounded-md border border-gray-300"
          >
            <p class="text-center mb-2">
              Input Bit Mask <span class="font-bold" id="inputImageBitMaskDimensions"></span>
            </p>
            <img
              id="inputImageBitMask"
              class="h-64 w-auto object-contain m-auto border border-gray-300 image-pixelated bg-checkerboard"
              alt="Input Bit Mask"
            />
          </a>

          <a
            id="inputImagePreviewLink"
            download="input_image.png"
            class="block p-4 rounded-md border border-gray-300"
          >
            <p class="text-center mb-2">
              Input Tile Set <span class="font-bold" id="inputImagePreviewDimensions"></span>
            </p>
            <img
              id="inputImagePreview"
              class="h-64 w-auto object-contain m-auto border border-gray-300 image-pixelated bg-checkerboard"
              alt="Input Tile Set"
            />
          </a>
        </div>

        <div class="flex flex-col gap-4 border border-gray-300 rounded-md p-4 flex-1 bg-stone-100">
          <div>
            <h2 class="text-xl text-center pb-4">Tiled Output</h2>
            <label for="outputTileSetSelect" class="mr-2">Output Tile Set:</label>
            <select
              id="outputTileSetSelect"
              class="p-2 border border-gray-300 rounded-md"
              onchange="onUpdateOutputTileSet()"
            >
              <option value="0" selected>Option 0</option>
            </select>
            <a
              id="outputTileSetLink"
              href=""
              target="_blank"
              rel="noopener noreferrer"
              class="text-blue-600 hover:text-blue-500 underline"
            ></a>
          </div>

          <a
            id="outputImageBitMaskLink"
            download="output_image_bit_mask.png"
            class="block p-4 rounded-md border border-gray-300"
          >
            <p class="text-center mb-2">
              Output Bit Mask <span class="font-bold" id="outputImageBitMaskDimensions"></span>
            </p>
            <img
              id="outputImageBitMask"
              class="h-64 w-auto object-contain m-auto border border-gray-300 image-pixelated bg-checkerboard"
              alt="Output Bit Mask"
            />
          </a>

          <a
            id="outputImagePreviewLink"
            download="output_image.png"
            class="block p-4 rounded-md border border-gray-300"
          >
            <p class="text-center mb-2">
              Output Tile Set <span class="font-bold" id="outputImagePreviewDimensions"></span>
            </p>
            <img
              id="outputImagePreview"
              class="h-64 w-auto object-contain m-auto border border-gray-300 image-pixelated bg-checkerboard"
              alt="Output Tile Set"
            />
          </a>
        </div>
      </div>
    </div>

    <!-- https://jakearchibald.com/2017/es-modules-in-browsers/ -->
    <script src="./js/main.js" type="module"></script>
    <noscript> Please enable JavaScript to continue using this application. </noscript>
  </body>
</html>
